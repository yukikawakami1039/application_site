### 要件定義書（修正版）：静的サイトジェネレーターによるアフィリエイト記事投稿サイト

> **NOTE (2025-07-13):** 出力先を `public/` から `docs/` に統一しました。GitHub Pages は `docs/` を公開対象に設定してください。

#### 1. 概要

本プロジェクトは、データベースを使用せず、マークダウンファイルから**静的な HTML サイトを生成する**アフィリエイト記事サイトを構築することを目的とする。
開発プロセスには、t-wada 式 TDD（テスト駆動開発）を採用し、品質と保守性の高いコードを目指す。

#### 2. 要件

**2.1. 機能要件**

- **記事管理:**
  - `articles`という名前のフォルダにマークダウンファイル (`.md`) を追加する。
- **サイト生成（ビルド）:**
  - ビルド用のスクリプトを実行すると、以下の HTML ファイルが`public`ディレクトリに生成される。
    - **記事一覧ページ:** `articles`フォルダ内の全記事へのリンクを持つトップページ (`docs/index.html`) が生成される。
    - **記事詳細ページ:** 各マークダウンファイルが個別の HTML ファイル (`docs/articles/ファイル名.html`) に変換される。
- **記事表示:**
  - 生成された`public`ディレクトリを Web サーバーでホスティングすることで、サイトが閲覧可能になる。

**2.2. 非機能要件**

- **静的構成:** サイトは事前に生成された HTML, CSS, JavaScript ファイルのみで構成され、動的なサーバーサイド処理を持たない。
- **データストア:** ファイルシステムを唯一のデータソースとする。
- **構成:** Node.js をベースとし、ビルド処理に必要な最小限のライブラリで構成する。
- **開発手法:** t-wada 式 TDD を採用する。

#### 3. 技術スタック（案）

- **ビルドスクリプト:** Node.js
  - 理由: ファイル操作やライブラリの連携が容易なため。
- **マークダウンパーサー:** `marked`
  - 理由: シンプルで高速な、人気のマークダウンパーサーライブラリのため。
- **テストフレームワーク:** Jest
  - 理由: 設定が簡単で、Node.js 環境でのテストに広く使われているため。

#### 4. 開発アプローチ（t-wada 式 TDD）

以下のステップで**ビルドスクリプト**を開発します。各ステップで「RED -> GREEN -> REFACTOR」のサイクルを回します。

1.  **プロジェクト初期設定:**
    - `package.json`の作成 (`npm init`)
    - 必要なライブラリ（`marked`, `jest`）のインストール
2.  **TDD サイクル 1: 記事ファイルの読み込み機能**
    - **RED:** 「指定したディレクトリからマークダウンファイルを 1 つ読み込む」というテストを書き、失敗させる。
    - **GREEN:** テストをパスする最小限のファイル読み込み処理を実装する。
    - **REFACTOR:** コードを整理・改善する。
3.  **TDD サイクル 2: マークダウンのパース機能**
    - **RED:** 「読み込んだマークダウン文字列を HTML に変換する」というテストを書き、失敗させる。
    - **GREEN:** `marked`ライブラリを使い、HTML に変換する処理を実装する。
    - **REFACTOR:** コードを整理・改善する。
4.  **TDD サイクル 3: 記事一覧の取得機能**
    - **RED:** 「指定したディレクトリ内の全てのマークダウンファイルを読み込み、ファイル名のリストを返す」というテストを書き、失敗させる。
    - **GREEN:** 複数ファイルを処理するロジックを実装する。
    - **REFACTOR:** コードを整理・改善する。
5.  **ビルドスクリプトの実装:**
    - 上記でテスト済みのロジックを組み合わせる。
    - **RED:** 「`articles`内の md ファイルから`docs/articles/`に HTML ファイルが生成される」というテストを記述。
    - **GREEN:** ファイル書き出し処理を実装。
    - **RED:** 「`docs/index.html`に記事一覧の HTML が生成される」というテストを記述。
    - **GREEN:** 一覧ページの生成処理を実装。
    - **REFACTOR:** 全体のコードを整理・改善する。
